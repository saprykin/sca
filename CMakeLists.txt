cmake_minimum_required (VERSION 2.8)
project (SCA C)
set (SCA_VERSION_MAJOR 0)
set (SCA_VERSION_MINOR 0)
set (SCA_VERSION_PATCH 1)
set (SCA_VERSION ${SCA_VERSION_MAJOR}.${SCA_VERSION_MINOR}.${SCA_VERSION_PATCH})
set (SCALIB_VERSION ${SCA_VERSION})

if(!MSVC)
	message(FATAL_ERROR "CMake build system is only available for Windows (MSVC) targets")
endif()

configure_file (
	"${PROJECT_SOURCE_DIR}/Doxyfile.in"
	"${PROJECT_BINARY_DIR}/Doxyfile"
)

subdirs (src)
subdirs (cmake)

set (CPACK_PACKAGE_NAME ${PROJECT_NAME}-installer)
set (CPACK_PACKAGE_VENDOR "Alexander Saprykin")
set (CPACK_PACKAGE_DESCRIPTION_SUMMARY "${PROJECT_NAME} - System routines library")
set (CPACK_PACKAGE_VERSION_MAJOR ${SCA_VERSION_MAJOR})
set (CPACK_PACKAGE_VERSION_MINOR ${SCA_VERSION_MINOR})
set (CPACK_PACKAGE_VERSION_PATCH ${SCA_VERSION_PATCH})
set (CPACK_PACKAGE_VERSION ${SCA_VERSION})
set (CPACK_PACKAGE_INSTALL_DIRECTORY ${PROJECT_NAME}-${CPACK_PACKAGE_VERSION})
set (CPACK_COMPONENTS_ALL Core)
set (CPACK_COMPONENT_CORE_DISPLAY_NAME "Core components")
set (CPACK_COMPONENT_CORE_DESCRIPTION "Core library with headers")
set (CPACK_COMPONENT_CORE_REQUIRED TRUE)
set (CPACK_NSIS_DISPLAY_NAME ${PROJECT_NAME})
include (CPack)